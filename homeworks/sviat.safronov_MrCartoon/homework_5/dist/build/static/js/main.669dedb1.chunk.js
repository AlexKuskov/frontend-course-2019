(this.webpackJsonpsapper=this.webpackJsonpsapper||[]).push([[0],{132:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),l=n(7),o=n.n(l),i=(n(76),n(17)),s=n(18),c=n(20),u=n(19),h=n(21),d=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={cell:e.cell,rowIndex:e.rowIndex,index:e.i,board:e.board,loosingCell:!1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"renderCell",value:function(){return 0!==this.state.cell[1]?0===this.state.cell[2]?" ":this.state.cell[2]:" "}},{key:"showCell",value:function(){var e=this;this.setState((function(t){var n=t.loosingCell,r=e.props.showCell(e.state.rowIndex,e.state.index,!0);return{loosingCell:null!==r?r:n}}))}},{key:"render",value:function(){return a.a.createElement("td",{class:"".concat(2===this.state.cell[1]&&"opened"," ").concat(this.state.loosingCell&&"loosing-cell"),onClick:this.showCell.bind(this)},a.a.createElement("p",null,this.renderCell(this.state.Row)))}}]),t}(a.a.Component),f=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={cells:e.row,index:e.i,board:e.board},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"renderCells",value:function(){var e=this;return this.state.cells.map((function(t,n){return a.a.createElement(d,{key:"cell-"+e.state.index+"-"+n,i:n,rowIndex:e.state.index,cell:t,board:e.state.board,showCell:e.props.showCell})}))}},{key:"render",value:function(){return a.a.createElement("tr",null,this.renderCells())}}]),t}(a.a.Component),m=function(e){function t(e){var n;Object(i.a)(this,t),n=Object(c.a)(this,Object(u.a)(t).call(this,e));var r=Array.from({length:e.size},(function(){return Array.from({length:e.size},(function(){return[Math.round(Math.random()*e.complexity),0,null]}))}));r.forEach((function(e,t){return e.forEach((function(e,a){return r[t][a][2]=n.renderCell({cell:e,rowI:t,cellI:a,board:r})}))}));var a=0;return r.forEach((function(e){return a+=e.filter((function(e){return 1===e[0]})).length})),n.state={board:r,gameFinished:!1,gameLost:!1,bombsCount:a,openedCount:0},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"renderCell",value:function(e){var t=e.cell,n=e.board,r=e.rowI,a=e.cellI;if(1===t[0])return"*";return[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]].map((function(e){return((n[r+e[0]]||[])[a+e[1]]||[])[0]||0})).reduce((function(e,t){return e+t}),0)}},{key:"showCell",value:function(e,t,n,r){var a=this;if(this.state.gameFinished)return null;var l=(this.state.board[e]||[])[t];if(n)return 1===l[0]?(this.setState((function(e){var t=e.board;return t.forEach((function(e,n){e.forEach((function(e,r){0===t[n][r][1]&&(t[n][r][1]=1)}))})),{board:t,gameFinished:!0,gameLost:!0}})),!0):(this.setState((function(n){var r=n.board,l=n.openedCount,o=n.bombsCount,i=a.showCell(e,t,!1,[]);return i.forEach((function(e){return r[e[0]][e[1]][1]=2})),{board:r,openedCount:l+i.length,gameFinished:Math.pow(a.props.size,2)-o===l+i.length}})),!1);if(r.length>Math.pow(this.props.size,2))throw"loop";if(!l||l&&(1===l[0]||0!==r.filter((function(n){return n[0]===e&&n[1]===t})).length))return r;var o=r.concat([[e,t]]);return 0===l[2]&&[[1,0],[0,1],[-1,0],[0,-1]].forEach((function(n){o=a.showCell(e+n[0],t+n[1],!1,o)})),o}},{key:"renderRows",value:function(){var e=this;return this.state.board.map((function(t,n){return a.a.createElement(f,{key:"row-"+n,i:n,row:t,board:e.state.board,showCell:e.showCell.bind(e)})}))}},{key:"renderResults",value:function(){if(this.state.gameFinished)return this.state.gameLost?a.a.createElement("p",null,"You lost!"):a.a.createElement("p",null,"You won")}},{key:"render",value:function(){return a.a.createElement("div",null,this.renderResults(),a.a.createElement("table",null,this.renderRows()))}}]),t}(a.a.Component),p=n(54),b=(n(132),n(133),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={complexity:.55,size:20,currentComplexity:0,currentSize:0,play:0},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleComplexity",value:function(e){this.setState((function(){return{complexity:e}}))}},{key:"handleSize",value:function(e){this.setState((function(){return{size:e}}))}},{key:"start",value:function(){this.setState((function(e){return{currentComplexity:e.complexity,currentSize:e.size,play:e.play+1}})),console.log(this.renderBoard())}},{key:"renderBoard",value:function(){if(0!==this.state.play)return a.a.createElement(m,{key:"play"+this.state.play,size:this.state.currentSize,complexity:this.state.currentComplexity})}},{key:"render",value:function(){return a.a.createElement("div",{class:"wrapper"},a.a.createElement("p",{class:"slider-label"},"Complexity"),a.a.createElement(p.a,{className:"slider",defaultValue:this.state.complexity,min:.55,max:.65,step:.002,onChange:this.handleComplexity.bind(this)}),a.a.createElement("p",{class:"slider-label"},"Size"),a.a.createElement(p.a,{className:"slider",defaultValue:this.state.size,min:10,max:25,onChange:this.handleSize.bind(this)}),a.a.createElement("button",{onClick:this.start.bind(this)},"Play"),this.renderBoard())}}]),t}(a.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},71:function(e,t,n){e.exports=n(134)},76:function(e,t,n){}},[[71,1,2]]]);
//# sourceMappingURL=main.669dedb1.chunk.js.map